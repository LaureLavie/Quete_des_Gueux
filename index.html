<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <script type="module" src="./map.js" defer></script>
    <script type="module" src="./script.js" defer></script>
    <title>ğŸ» La QuÃªte des Gueux ğŸ»</title>
  </head>
  <body>
    <div id="intro-screen" class="intro-screen">
      <div class="intro-content">
        <h1>ğŸ» La QuÃªte des Gueux ğŸ»</h1>
        <p>
          "Oyez, Oyez, tas de gueux et chevaliers Ã  la ramasse !<br /><br />
          Le roi Arthur, ce grand benÃªt couronnÃ©, s'est fait refiler par la Dame
          du Lac une mission aussi tordue qu'une jambe de pouilleux :<br />
          DÃ©goter un trÃ©sor miteux, planquÃ© dans un labyrinthe qui pue la pisse
          de troll et la sueur de gueux.<br /><br />
          Votre job ? Gribouiller la carte du royaume, dÃ©nicher l'entrÃ©e du
          bourbier, et guider Arthur, dont le sens de l'orientation rivalise
          avec celui d'un poivrot sous champignons hallucinogÃ¨nes.<br />
          Seuls les cerveaux affÃ»tÃ©s, capables de dompter les algorithmes et de
          survivre Ã  la tentation d'aller se rincer le gosier dans la premiÃ¨re
          taverne,<br />
          rÃ©ussiront Ã  en sortir vivant.<br /><br />
          Si, par un miracle, vous mettez la main sur le magot... ramenez-le au
          roi Arthur (ou planquez-le, on dira rien).<br />
          Sinon, direction les latrines, avec les rats, les poux, et la lÃ©gende
          du chevalier qui a glissÃ© sur une bouse."
        </p>
        <button class="btn" onclick="showMap()">
          Commencer la QuÃªte des gueux
        </button>
      </div>
    </div>

    <div id="map-screen" class="map-screen">
      <div class="map-content">
        <h2>ğŸ—ºï¸ Royaume de Kaamelott</h2>
        <p>
          Trouvez les 3 points de passage pour accÃ©der au labyrinthe Maze'Lott !
        </p>
        <div id="mapDiv">
          <img
            src="./royaume.png"
            svg
            width="80%"
            viewBox="0 0 100 700"
            style="object-fit: center"
          />
          <!-- ArriÃ¨re-plan de la carte -->
          <rect
            width="100"
            height="700"
            fill="#f4e4bc"
            stroke="#8b4513"
            stroke-width="4"
          />

          <!-- Contours de l'Ã®le -->
          <path
            d="M100,150 Q200,100 300,120 Q400,90 500,130 Q600,110 650,160 Q700,200 680,300 Q650,400 600,450 Q500,480 400,470 Q300,490 200,460 Q150,400 120,350 Q80,250 100,150 Z"
            fill="#e8d5b7"
            stroke="#8b4513"
            stroke-width="2"
          />
        </div>
        <div id="map-status">
          Points de passage trouvÃ©s: <span id="waypoints-found">0</span>/3
        </div>
      </div>
    </div>

    <div class="message-popup" id="messagePopup"></div>

    <div class="header">
      <h1>ğŸ° Maze'Lott - QuÃªte des Gueux ğŸ°</h1>
      <p>"QuÃªte de bouseux pour un TrÃ©sor de Pouilleux !"</p>
    </div>
    <div class="controls">
      <div class="size-controls">
        <label>Largeur:</label>
        <input type="number" id="width" value="25" min="10" max="50" />
        <label>Hauteur:</label>
        <input type="number" id="height" value="25" min="10" max="50" />
      </div>
      <button class="btn" onclick="generateMaze()">ğŸ—ï¸ Nouveau Maze'Lott</button>
      <button class="btn" onclick="showOptimalPath()">
        ğŸ—ºï¸ Chemin optimal pour Gueux
      </button>
      <button class="btn" onclick="resetGame()">
        ğŸ”„ Recommence ! C'est le bordel, chef !
      </button>
    </div>
    <div class="game-container">
      <div class="maze-container">
        <div id="maze" class="maze"></div>
      </div>
      <div class="info-panel">
        <h3>âš”ï¸ Grimoire du Bouseux âš”ï¸</h3>
        <div class="legend">
          <div class="legend-item">
            <div class="legend-color wall"></div>
            <span>Murs crasseux</span>
          </div>
          <div class="legend-item">
            <div class="legend-color path"></div>
            <span>Chemins miteux</span>
          </div>
          <div class="legend-item">
            <div class="legend-color start">ğŸ°</div>
            <span>Taudis de dÃ©part</span>
          </div>
          <div class="legend-item">
            <div class="legend-color exit">ğŸšª</div>
            <span>Sortie vers la libertÃ©</span>
          </div>
          <div class="legend-item">
            <div class="legend-color path">ğŸ’°</div>
            <span>Butin planquÃ© (invisible)</span>
          </div>
          <div class="legend-item">
            <div class="legend-color path">ğŸ—ºï¸</div>
            <span>Indices de pouilleux (invisibles)</span>
          </div>
          <div class="legend-item">
            <div class="legend-color player">ğŸ‘‘</div>
            <span>Votre misÃ©rable personne</span>
          </div>
        </div>
        <div class="controls-info">
          <h4>ğŸ® Grimoire du Bouseux</h4>
          <p>âŒ¨ï¸ Clavier : TraÃ®ner vos guÃªtres</p>
          <p>ğŸ–±ï¸ Souris : DÃ©placer votre carcasse</p>
          <p>ğŸ—ºï¸ 5 indices de bouseux vous guident</p>
          <p>ğŸ¯ But : Choper le butin et se barrer !</p>
        </div>
        <div class="stats" id="stats">
          <div><strong>ğŸ° QuÃªte des Pouilleux en cours...</strong></div>
          <div>ğŸ“ Position: <span id="position">Taudis</span></div>
          <div>ğŸ‘£ Pas du cul-terreux: <span id="steps">0</span></div>
          <div>ğŸ—ºï¸ Waypoints trouvÃ©s: <span id="waypoints">0</span></div>
          <div>ğŸ’° Magot: <span id="treasure-status">Que dalle !</span></div>
          <div>ğŸ† Ã‰tat: <span id="status">En galÃ¨re</span></div>
        </div>
      </div>
    </div>
    <div class="game-over" id="gameOver">
      <h2>ğŸ‰ Bravo Bouseux ! ğŸ‰</h2>
      <p>T'as chopÃ© le butin et t'es sorti de ce bourbier !</p>
      <p>Pas de la carcasse: <span id="final-steps"></span></p>
      <p>Waypoints dÃ©couverts: <span id="final-waypoints"></span>/5</p>
      <button class="btn" onclick="closeGameOver()">Continue Ã  Glander</button>
    </div>
  </body>
</html>
